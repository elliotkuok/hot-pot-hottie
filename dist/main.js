!function(){"use strict";!function(){const e={sausage:{image:"sausage.png",key:"w"},mushroom:{image:"mushroom.png",key:"a"},shrimp:{image:"shrimp.png",key:"s"},fishball:{image:"fishball.png",key:"d"},meatball:{image:"meatball.png",key:"ArrowUp"},dumpling:{image:"dumpling.png",key:"ArrowLeft"},bokchoy:{image:"bokchoy.png",key:"ArrowDown"},tofu:{image:"tofu.png",key:"ArrowRight"}};let t=null;function n(){const n=document.getElementById("speech-bubble"),s=function(){const t=Object.keys(e);return t[Math.floor(Math.random()*t.length)]}(),c=`/assets/food-icons/${e[s].image}`,a=document.createElement("img");a.src=c,a.alt=s,a.dataset.key=e[s].key,n.innerHTML="",n.appendChild(a),function(e){let n=e;function s(){const s=document.getElementById("speech-bubble");let c=s.querySelector(".timer-bar");if(!c){c=document.createElement("div"),c.className="timer-bar";const e=document.createElement("div");e.className="status-bar",c.appendChild(e),s.appendChild(c)}const a=c.querySelector(".status-bar"),r=n/e*100;a.style.width=`${r}%`,n<=0&&(u(),function(){const e=document.getElementById("speech-bubble"),t=e.querySelector(".timer-bar");t&&(t.style.display="none"),l||(e.style.background="#DD2C00"),setTimeout((()=>{e.style.display="none",l=!1,document.getElementById("speech-bubble").innerHTML="",setTimeout((()=>{o()}),2e3)}),500)}(),clearInterval(t),t=null),n-=.01}s(),t=setInterval(s,10)}(3),r=!0,d=!1}function o(){if(!s){const e=document.getElementById("speech-bubble");e.style.background="white",n(),e.style.display="block"}}let l=!1,s=!1;document.addEventListener("keydown",(e=>{const t=e.key,n=document.querySelector("#speech-bubble img"),o=n?n.dataset.key:null,c=document.getElementById("speech-bubble");t===o?(l=!0,s=!0,c.style.background="#66FF99"):(s=!0,l=!1,c.style.background="#DD2C00"),function(){const e=document.getElementById("speech-bubble").querySelector(".timer-bar");e&&(e.style.display="none")}()})),document.addEventListener("keyup",(e=>{const n=e.key,c=document.querySelector("#speech-bubble img");c&&n===c.dataset.key&&(l=!1),s=!1,null!==t&&(clearInterval(t),t=null),setTimeout((()=>{o()}),2e3)}));let c=0,a=!1,r=!0,d=!1;function u(){const e=document.getElementById("game-canvas");let t=e.querySelector(".missed");c<3&&r&&!d&&(t?t.innerText+="X":(t=document.createElement("div"),t.innerText="X",t.className="missed",t.style.position="absolute",t.style.bottom="5px",t.style.color="#DD2C00",t.style.fontFamily="Nerko One",t.style.fontSize="60px",e.appendChild(t)),c++,r=!1)}document.getElementById("start-button").addEventListener("click",(function(){document.getElementById("introduction").style.display="none",n()})),document.getElementById("play-again-button").addEventListener("click",(()=>{document.getElementById("game-over-modal").style.display="none",c=0,document.getElementById("game-canvas").querySelectorAll(".missed").forEach((e=>e.remove())),n()})),document.addEventListener("keydown",(e=>{const t=e.key,n=document.querySelector("#speech-bubble img").dataset.key;t!==n?a=!0:t===n&&(d=!0),3===c&&(document.getElementById("game-over-modal").style.display="flex")})),document.addEventListener("keyup",(e=>{e.key===document.querySelector("#speech-bubble img").dataset.key&&(d=!1),r=!0,a=!1}));const m=document.getElementById("right-arm");function i(e,t){const n=parseFloat(m.style.left)||-200,o=parseFloat(m.style.top)||250,l=e-n,s=t-o;let c=null;requestAnimationFrame((function e(t){c||(c=t);const a=t-c,r=Math.min(a/500,1),d=n+l*r,u=o+s*r;m.style.left=`${d}px`,m.style.top=`${u}px`,r<1&&requestAnimationFrame(e)}))}document.getElementById("date-arms"),document.addEventListener("keydown",(e=>{const t=e.key;t===document.querySelector("#speech-bubble img").dataset.key&&function(e){const t=document.querySelector(".circle"),n=parseFloat(t.style.left)||0;if(n>=125&&n<=160)i(-50,250),setTimeout((()=>{i(-200,250)}),1500);else{let t,n=250;switch(e){case"w":case"a":case"s":case"d":case"ArrowUp":case"ArrowLeft":case"ArrowDown":case"ArrowRight":t=-150,n=250;break;default:return}i(t,n)}}(t)}));const y=document.querySelector(".circle"),g=300;let b,p=0,k=2,h="right",f=!1;function E(){"right"===h?p+=k:p-=k,y.style.left=`${p}px`,f=p>=125&&p<=160,(p>=g-y.clientWidth||p<=0)&&(h="right"===h?"left":"right"),b=requestAnimationFrame(E)}document.addEventListener("keydown",(e=>{e.key===document.querySelector("#speech-bubble img").dataset.key?document.getElementById("meter").style.display="block":u()})),document.addEventListener("keyup",(()=>{!function(){cancelAnimationFrame(b);const e=parseFloat(y.style.left);document.querySelector("#speech-bubble img")?.dataset?.key,(e<125||e>160)&&u()}(),function(){const e=document.querySelector(".progress");f?(e.style.background="#66FF99",e.style.border="yellow"):(e.style.background="#DD2C00",u()),setTimeout((()=>{meter.style.display="none",document.querySelector(".progress").style.background="linear-gradient(to right, #DD2C00 35%, #66FF99 45%, #66FF99 55%, #DD2C00 65%)",p=0,h="right",E()}),500)}()})),E(),document.addEventListener("DOMContentLoaded",(()=>{}))}()}();
//# sourceMappingURL=main.js.map